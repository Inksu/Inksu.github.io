(()=>{const e={},i=["living","groceries","hygiene","transportation","social"],t={living:{description:"Asuminen",spentDescription:"vuokran maksuun",firstPaymentDay:15,intervalDays:31,oneTimePayment:!0,options:[{id:"rent",price:447,description:"Vuokra ja vesimaksu"}]},groceries:{description:"Ruoka",spentDescription:"ruokaostoksiin",firstPaymentDay:1,intervalDays:1,options:[{id:"burger-meal",price:9.9,description:"Kerroshampurilaisateria"},{id:"student-lunch",price:3.2,description:"Opiskelijalounas"},{id:"sandwich-half",price:7.6,description:"Täytetty voileipä (15 cm)"},{id:"pizza",price:14.9,description:"Pizza"},{id:"small-kebab",price:12.9,description:"Kebab (pieni)"}]},hygiene:{description:"Hygienia",spentDescription:"hygieniatuotteisiin",firstPaymentDay:3,intervalDays:7,options:[{id:"toothpaste",price:2.5,description:"Hammastahna"},{id:"shampoo",price:5.9,description:"Shampoo"},{id:"soap",price:1.5,description:"Saippua"},{id:"toilet-paper",price:3.2,description:"WC-paperi"},{id:"deodorant",price:4.9,description:"Deodorantti"},{id:"intime-hygiene",price:2.45,description:"Intiimihygieniatuotteet"}]},transportation:{description:"Joukkoliikenne",spentDescription:"joukkoliikenteeseen",firstPaymentDay:1,intervalDays:31,oneTimePayment:!0,options:[{id:"bus-ticket",price:38,description:"Joukkoliikenne, kuukausilippu"}]},social:{description:"Viihde",spentDescription:"viihteeseen",options:[{id:"movie-ticket",price:14.3,description:"Elokuvalippu"},{id:"restaurant",price:30,description:"Ravintola"},{id:"cafe",price:5,description:"Kahvila"},{id:"bar",price:10,description:"Baari"},{id:"concert",price:34.5,description:"Konsertti"}]}};function n(e){return Number.parseFloat(e).toFixed(2)}function o(e){return n(e).replace(".",",")}function r(i,t){i.preventDefault(),"expense-inner"===i.target.className&&"money-bill"!==t&&(i.target.style.backgroundColor="#f5f5f5",function(i){const t={living:{description:"Asuminen",spentDescription:"vuokran maksuun",firstPaymentDay:15,intervalDays:31,oneTimePayment:!0,options:[{id:"rent",price:447,description:"Vuokra ja vesimaksu"}]},groceries:{description:"Ruoka",spentDescription:"ruokaostoksiin",firstPaymentDay:1,intervalDays:1,options:[{id:"burger-meal",price:9.9,description:"Kerroshampurilaisateria"},{id:"student-lunch",price:3.2,description:"Opiskelijalounas"},{id:"sandwich-half",price:7.6,description:"Täytetty voileipä (15 cm)"},{id:"pizza",price:14.9,description:"Pizza"},{id:"small-kebab",price:12.9,description:"Kebab (pieni)"}]},hygiene:{description:"Hygienia",spentDescription:"hygieniatuotteisiin",firstPaymentDay:3,intervalDays:7,options:[{id:"toothpaste",price:2.5,description:"Hammastahna"},{id:"shampoo",price:5.9,description:"Shampoo"},{id:"soap",price:1.5,description:"Saippua"},{id:"toilet-paper",price:3.2,description:"WC-paperi"},{id:"deodorant",price:4.9,description:"Deodorantti"},{id:"intime-hygiene",price:2.45,description:"Intiimihygieniatuotteet"}]},transportation:{description:"Joukkoliikenne",spentDescription:"joukkoliikenteeseen",firstPaymentDay:1,intervalDays:31,oneTimePayment:!0,options:[{id:"bus-ticket",price:38,description:"Joukkoliikenne, kuukausilippu"}]},social:{description:"Viihde",spentDescription:"viihteeseen",options:[{id:"movie-ticket",price:14.3,description:"Elokuvalippu"},{id:"restaurant",price:30,description:"Ravintola"},{id:"cafe",price:5,description:"Kahvila"},{id:"bar",price:10,description:"Baari"},{id:"concert",price:34.5,description:"Konsertti"}]}},r=["living","groceries","hygiene","transportation","social"];let a,s,c;for(const e of r)if(c=e,s=t[e],a=s.options.find((e=>e.id===i)),a)break;if(!a)return void u("Tapahtui virhe! Yritä uudelleen.","error");const d=a.price,l=s.spentDescription;var y,m;!s.oneTimePayment||e.mandatoryExpenses.includes(c)?e.money-d<0?u(`Rahasi eivät riitä ${l}!`,"error"):(m=d,e.money-=m,e.money=n(e.money),p(),u(`Käytit ${o(d)} € ${l}`,"info"),y=c,e.mandatoryExpenses=e.mandatoryExpenses.filter((e=>e!==y)),function(e){document.getElementById(e).style.backgroundColor="green"}(c)):u("Tätä kulua ei tarvitse maksaa kuin kerran!","error")}(t),function(){const i={living:{description:"Asuminen",spentDescription:"vuokran maksuun",firstPaymentDay:15,intervalDays:31,oneTimePayment:!0,options:[{id:"rent",price:447,description:"Vuokra ja vesimaksu"}]},groceries:{description:"Ruoka",spentDescription:"ruokaostoksiin",firstPaymentDay:1,intervalDays:1,options:[{id:"burger-meal",price:9.9,description:"Kerroshampurilaisateria"},{id:"student-lunch",price:3.2,description:"Opiskelijalounas"},{id:"sandwich-half",price:7.6,description:"Täytetty voileipä (15 cm)"},{id:"pizza",price:14.9,description:"Pizza"},{id:"small-kebab",price:12.9,description:"Kebab (pieni)"}]},hygiene:{description:"Hygienia",spentDescription:"hygieniatuotteisiin",firstPaymentDay:3,intervalDays:7,options:[{id:"toothpaste",price:2.5,description:"Hammastahna"},{id:"shampoo",price:5.9,description:"Shampoo"},{id:"soap",price:1.5,description:"Saippua"},{id:"toilet-paper",price:3.2,description:"WC-paperi"},{id:"deodorant",price:4.9,description:"Deodorantti"},{id:"intime-hygiene",price:2.45,description:"Intiimihygieniatuotteet"}]},transportation:{description:"Joukkoliikenne",spentDescription:"joukkoliikenteeseen",firstPaymentDay:1,intervalDays:31,oneTimePayment:!0,options:[{id:"bus-ticket",price:38,description:"Joukkoliikenne, kuukausilippu"}]},social:{description:"Viihde",spentDescription:"viihteeseen",options:[{id:"movie-ticket",price:14.3,description:"Elokuvalippu"},{id:"restaurant",price:30,description:"Ravintola"},{id:"cafe",price:5,description:"Kahvila"},{id:"bar",price:10,description:"Baari"},{id:"concert",price:34.5,description:"Konsertti"}]}},t=e.mandatoryExpenses.reduce(((e,t)=>e+i[t].options.toSorted(((e,i)=>e.price-i.price))[0].price),0);e.money-t<0&&u("Valitettavasti rahasi loppuivat ennen kuukauden loppua!","error"),0===e.mandatoryExpenses.length&&document.getElementById("end-day").removeAttribute("disabled")}())}function a(){c(),e.day<30?(e.day++,d(e.day),f(e.day)):u("Onnittelut! Selvisit kuukaudesta!","info"),s()}function s(){document.getElementById("end-day").setAttribute("disabled","disabled")}function p(){var i;i=e.money,document.getElementById("money").innerText=o(i),d(e.day)}function c(){document.getElementById("message").innerText=""}function d(e){document.getElementById("day").innerText=e}function u(e,i="info"){const t=document.getElementById("message");t.innerText=e,"error"===i&&(t.style.color="red"),"info"===i&&(t.style.color="black")}function l(e){const i=document.getElementById(e);i.style.backgroundColor="red",i.style.border="2px solid Black"}function y(e){const i=document.getElementById(e);i.style.backgroundColor="paleturquoise",i.style.border="2px dashed Black"}function m(e){document.getElementById(e).style.display="none"}function k(e){document.getElementById(e).style.display="block"}function f(){const n=e.day,o=[];for(const e of i){const i=t[e];n===i.firstPaymentDay||(n-i.firstPaymentDay)%i.intervalDays==0?(o.push(e),l(e),k(e)):(y(e),i.oneTimePayment&&m(e))}e.mandatoryExpenses=o}Object.assign(e,{money:592.28,day:1,mandatoryExpenses:[]}),c(),p(),f(),function(){for(const e of i){const i=t[e];for(const t of i.options){const i=document.createElement("div");i.setAttribute("id",t.id),i.setAttribute("class","expense-inner"),i.setAttribute("draggable","false"),i.style.backgroundColor="#f5f5f5",i.addEventListener("drop",(e=>r(e,t.id))),i.innerText=`${t.description} (${o(t.price)} €)`,document.getElementById(e).appendChild(i)}}document.getElementById("end-day").addEventListener("click",a),document.getElementById("expenseTypes").addEventListener("dragover",(e=>function(e){e.preventDefault(),"expense-inner"===e.target.className&&(e.target.style.backgroundColor="lightblue")}(e))),document.getElementById("expenseTypes").addEventListener("dragleave",(e=>function(e){"expense-inner"===e.target.className&&(e.target.style.backgroundColor="#f5f5f5")}(e)))}(),s()})();